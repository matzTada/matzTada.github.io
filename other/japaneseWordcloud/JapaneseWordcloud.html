<!-- based on http://chasen.org/~taku/software/TinySegmenter/ -->

<html>
<head>
  <meta charset="UTF-8">
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script language="javascript" type="text/javascript" src="http://chasen.org/~taku/software/TinySegmenter/tiny_segmenter-0.2.js"></script>

  <script src="https://www.amcharts.com/lib/4/core.js"></script>
  <script src="https://www.amcharts.com/lib/4/charts.js"></script>
  <script src="https://www.amcharts.com/lib/4/plugins/wordCloud.js"></script>
  <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

  <style>
    body {padding: 0; margin: 0;} /* to avoid to show scroll bars*/
    canvas {display: block;}  /* to avoid to show scroll bars*/
  </style>
</head>
<body>

<h2>Word cloud after segmented. Input here!</h2>

<input type="text" id="sampletext" value="">
<input type="button" id="testButton" value="button">
<!-- <h2>Text input</h2>
<h3 id="o_input"></h3> -->

<h2>Word cloud after segmented</h2>
<div id="chartdiv"></div>

<h2>Segmented input</h2>
<h3 id="o_segmented"></h3>

</body>

<script language="javascript" type="text/javascript">

$(function () {
  $("#testButton").on("click", function() {
    var getData = $("#sampletext").val(); // get text input data
    $("#o_input").text(getData);

    var segmenter = new TinySegmenter(); // make instance
    var segs = segmenter.segment(getData);  // return array of words
    var segmentedtextdata = segs.join(" ");
    $("#o_segmented").text(segmentedtextdata);

    series.text = segmentedtextdata;

  });
})

var chart = am4core.create("chartdiv", am4plugins_wordCloud.WordCloud);
var series = chart.series.push(new am4plugins_wordCloud.WordCloudSeries());

am4core.ready(function() {

// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end

series.accuracy = 4;
series.step = 15;
series.rotationThreshold = 0.7;
series.maxCount = 200;
series.minWordLength = 2;
series.labels.template.tooltipText = "{word}: {value}";
series.fontFamily = "Courier New";
series.maxFontSize = am4core.percent(30);
series.colors = new am4core.ColorSet();
series.colors.passOptions = {};

series.text = "Waiting for your ipnut.";

}); // end am4core.ready()

</script>

</html>
